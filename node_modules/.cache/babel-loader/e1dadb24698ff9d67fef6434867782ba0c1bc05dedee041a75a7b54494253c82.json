{"ast":null,"code":"import { configureStore } from '@reduxjs/toolkit';\nimport { setupListeners } from '@reduxjs/toolkit/query';\nimport { playmakerApi } from './services/playmaker';\nimport { rtkQueryErrorLogger } from './middlewares/error';\nimport reducers from './redux/reducers';\nimport rootSaga from './redux/sagas';\nimport createSagaMiddleware from 'redux-saga';\nconst sagaMiddleware = createSagaMiddleware();\nconst localStorageMiddleware = ({\n  getState\n}) => {\n  // <--- FOCUS HERE\n  return next => action => {\n    const result = next(action);\n    if (getState().theme.Layout) {\n      localStorage.setItem('applicationState2', JSON.stringify(getState().theme.Layout));\n    }\n    return result;\n  };\n};\nconst reHydrateStore = () => {\n  // <-- FOCUS HERE\n\n  if (localStorage.getItem('applicationState2') !== null) {\n    return {\n      theme: {\n        Layout: JSON.parse(localStorage.getItem('applicationState2'))\n      }\n    }; // re-hydrate the store\n  }\n};\nexport const store = configureStore({\n  reducer: {\n    // Add the generated reducer as a specific top-level slice\n    [lastmealApi.reducerPath]: lastmealApi.reducer,\n    theme: reducers\n  },\n  // Adding the api middleware enables caching, invalidation, polling,\n  // and other useful features of `rtk-query`.\n  middleware: getDefaultMiddleware => getDefaultMiddleware().concat([lastmealApi.middleware, rtkQueryErrorLogger, sagaMiddleware, localStorageMiddleware]),\n  preloadedState: reHydrateStore()\n});\n\n// optional, but required for refetchOnFocus/refetchOnReconnect behaviors\n// see `setupListeners` docs - takes an optional callback as the 2nd arg for customization\nsetupListeners(store.dispatch);\nsagaMiddleware.run(rootSaga);","map":{"version":3,"names":["configureStore","setupListeners","playmakerApi","rtkQueryErrorLogger","reducers","rootSaga","createSagaMiddleware","sagaMiddleware","localStorageMiddleware","getState","next","action","result","theme","Layout","localStorage","setItem","JSON","stringify","reHydrateStore","getItem","parse","store","reducer","lastmealApi","reducerPath","middleware","getDefaultMiddleware","concat","preloadedState","dispatch","run"],"sources":["/Users/alihosseini/Documents/GitHub/playmaker-ui/src/store.js"],"sourcesContent":["import { configureStore } from '@reduxjs/toolkit'\nimport { setupListeners } from '@reduxjs/toolkit/query'\nimport { playmakerApi } from './services/playmaker'\nimport { rtkQueryErrorLogger } from './middlewares/error'\nimport reducers from './redux/reducers';\nimport rootSaga from './redux/sagas';\nimport createSagaMiddleware from 'redux-saga';\n\nconst sagaMiddleware = createSagaMiddleware();\n\nconst localStorageMiddleware = ({ getState }) => { // <--- FOCUS HERE\n  return (next) => (action) => {\n    const result = next(action);\n    if (getState().theme.Layout) {\n      localStorage.setItem('applicationState2', JSON.stringify(\n        getState().theme.Layout\n      ));\n    }\n    return result;\n  };\n};\n\n\nconst reHydrateStore = () => { // <-- FOCUS HERE\n\n  if (localStorage.getItem('applicationState2') !== null) {\n    return { theme: { Layout: JSON.parse(localStorage.getItem('applicationState2')) } } // re-hydrate the store\n  }\n}\n\nexport const store = configureStore({\n  reducer: {\n    // Add the generated reducer as a specific top-level slice\n    [lastmealApi.reducerPath]: lastmealApi.reducer,\n    theme: reducers\n  },\n  // Adding the api middleware enables caching, invalidation, polling,\n  // and other useful features of `rtk-query`.\n  middleware: (getDefaultMiddleware) =>\n    getDefaultMiddleware().concat([lastmealApi.middleware, rtkQueryErrorLogger, sagaMiddleware, localStorageMiddleware]),\n\n  preloadedState: reHydrateStore()\n})\n\n// optional, but required for refetchOnFocus/refetchOnReconnect behaviors\n// see `setupListeners` docs - takes an optional callback as the 2nd arg for customization\nsetupListeners(store.dispatch)\n\nsagaMiddleware.run(rootSaga);\n\n\n\n"],"mappings":"AAAA,SAASA,cAAc,QAAQ,kBAAkB;AACjD,SAASC,cAAc,QAAQ,wBAAwB;AACvD,SAASC,YAAY,QAAQ,sBAAsB;AACnD,SAASC,mBAAmB,QAAQ,qBAAqB;AACzD,OAAOC,QAAQ,MAAM,kBAAkB;AACvC,OAAOC,QAAQ,MAAM,eAAe;AACpC,OAAOC,oBAAoB,MAAM,YAAY;AAE7C,MAAMC,cAAc,GAAGD,oBAAoB,CAAC,CAAC;AAE7C,MAAME,sBAAsB,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAE;EACjD,OAAQC,IAAI,IAAMC,MAAM,IAAK;IAC3B,MAAMC,MAAM,GAAGF,IAAI,CAACC,MAAM,CAAC;IAC3B,IAAIF,QAAQ,CAAC,CAAC,CAACI,KAAK,CAACC,MAAM,EAAE;MAC3BC,YAAY,CAACC,OAAO,CAAC,mBAAmB,EAAEC,IAAI,CAACC,SAAS,CACtDT,QAAQ,CAAC,CAAC,CAACI,KAAK,CAACC,MACnB,CAAC,CAAC;IACJ;IACA,OAAOF,MAAM;EACf,CAAC;AACH,CAAC;AAGD,MAAMO,cAAc,GAAGA,CAAA,KAAM;EAAE;;EAE7B,IAAIJ,YAAY,CAACK,OAAO,CAAC,mBAAmB,CAAC,KAAK,IAAI,EAAE;IACtD,OAAO;MAAEP,KAAK,EAAE;QAAEC,MAAM,EAAEG,IAAI,CAACI,KAAK,CAACN,YAAY,CAACK,OAAO,CAAC,mBAAmB,CAAC;MAAE;IAAE,CAAC,EAAC;EACtF;AACF,CAAC;AAED,OAAO,MAAME,KAAK,GAAGtB,cAAc,CAAC;EAClCuB,OAAO,EAAE;IACP;IACA,CAACC,WAAW,CAACC,WAAW,GAAGD,WAAW,CAACD,OAAO;IAC9CV,KAAK,EAAET;EACT,CAAC;EACD;EACA;EACAsB,UAAU,EAAGC,oBAAoB,IAC/BA,oBAAoB,CAAC,CAAC,CAACC,MAAM,CAAC,CAACJ,WAAW,CAACE,UAAU,EAAEvB,mBAAmB,EAAEI,cAAc,EAAEC,sBAAsB,CAAC,CAAC;EAEtHqB,cAAc,EAAEV,cAAc,CAAC;AACjC,CAAC,CAAC;;AAEF;AACA;AACAlB,cAAc,CAACqB,KAAK,CAACQ,QAAQ,CAAC;AAE9BvB,cAAc,CAACwB,GAAG,CAAC1B,QAAQ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}